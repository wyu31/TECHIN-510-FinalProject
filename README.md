# TECHIN-510-FinalProject
This is the repo for TECHIN-510 final Project.  
Thanks to Jackie, Wanling & Qianna.

## Project Name
OttyMoolðŸ¦¦ 

## Description
OttyMool is a comprehensive web application tailored to manage group expenses, especially for travel seamlessly. 

## Web app link:
https://510-finalproject.azurewebsites.net/

## Youtube link: 

## Problem Statement
The main problem OttyMool addresses is the complexity of managing group expenses, especially during travel. Traditional methods of tracking shared expenses are often cumbersome and prone to errors, leading to potential conflicts among group members. OttyMool aims to simplify this process by providing a platform where expenses can be entered in human language, which will be then saved in JSON format by OpenAI, and be further visualized and summarized in detailed reports dynamically.

## Technologies Used 
1. Streamlit for web app interface
2. OpenAI API Integration
3. Data Management with JSON
4. Data Analysis & Visualization with Pandas
5. Visual Style Customization with .css
6. (Further Development) PostgreSQL: Connecting the answers generated by OpenAI to a cloud database has proven challenging. Although a database connection module, db.py, was successfully implemented and connected to the cloud, conflicts between the cloud database tables and the JSON file storage approach led to numerous errors. As a result, reliance on cloud data storage has been put on hold for now, with the system instead facilitating user interactions through short-term memory, managed via temporarily generated JSON files. Moving forward, there's potential to explore and develop appropriate cloud-based storage solutions, or try to store current JSON files in the cloud.

## How to Run
1. Ensure Python and pip are installed on your system.
2. Clone the repository to your local machine.
3. Navigate to the project directory
4. Run the commands below in the terminal if you want to run in a virtual environment:
```bash
python -m venv venv
source venv/bin/activate
```
5. Finish the initial settings:
```bash
pip install -r requirements.txt
cp .env.sample .env
Change the .env file to match your environment
```
6. Run the commond in the terminal below to start the Streamlit app locally.
```bash
streamlit run app.py
```

## Reflections
### General Experience & Challenges
**Learning Experience**
1. Natural Language Processing (NLP): Implementing OpenAI's API to process and structure 
2. Expense entries in conversational language.
3. Using Streamlit with .css to create a user-friendly interface and a robust backend.
4. Designing dynamic visualizations to represent the fund flow situation among group members.

**Challenges Faced**
1. Ensuring that the natural language processing accurately interprets and structures the expense entries.
2. Safeguarding sensitive financial information and user data.
3. Creating an intuitive and responsive interface that accommodates various user interactions.
4. Designing the system to handle a growing number of users and transactions efficiently.
5. In order to define richer and free visual effects, we use CSS, but CSS is not so formal and stable compared to the basic components in stremlit, and it requires multiple debugging to achieve the ideal effect.
6. It was challenging for OpenAI to directly read and save the data it generated clearly. To address this, I provided a detailed definition of the JSON format in the internal prompt. This allowed the answers to output discussions in the correct format for direct copying and pasting into streamlit text box. Hence, data can be further saved into the database, combining the strengths of OpenAI and Streamlit to enable intelligent accounting.

### Detailed New Takeaways
1. ```st.rerun```  
This enables the button to jump only once, instead of the first two times.
2. ```from st_clickable_images import clickable_images```  
This converts images into interactive buttons.
3. ```import streamlit.components.v1 as components```  
This achieves implementing a specific HTML/JavaScript template for a new charting library within the Streamlit frame.
4. ```from streamlit_float import *```  
This enables float a container, which means fixing the vertical position of Streamlit containers relative to viewport instead of page.
5. ```style.css```
This .css file can define some personalized settings that run globally, such as headlines, subtitles, masking color blocks and buttons.
6. Placeholder
This is a convenient way to create mutiple blank lines as space between components.
```bash
    # Placeholder
    for _ in range(4):  # Adjust the range with number
        st.text("")
```
7. Generally speaking, st.button looks the same everywhere, especially after global settings are made in the .css file. But there is a way to create additional button styles, although its disadvantage is that it is not stable, needs to appear multiple times in the right position, and will also bring invisible blank lines.
```bash
    # Buttons that look different from the default button in css
    def ChangeButtonColour(widget_label, font_color, background_color='transparent', border_style=None):
        # Use 'let' for block scope in modern JavaScript
        # Check for elements' existence before attempting to style them
        # Use 'textContent' for better compatibility across browsers
        border_style_js = f"elements[i].style.border = '{border_style}';" if border_style else ""
        htmlstr = f"""
            <script>
                document.addEventListener('DOMContentLoaded', (event) => {{
                    let elements = window.parent.document.querySelectorAll('button');
                    for (let i = 0; i < elements.length; ++i) {{
                        if (elements[i].textContent.trim() == '{widget_label}') {{
                            elements[i].style.color ='{font_color}';
                            elements[i].style.background = '{background_color}';
                            {border_style_js}
                        }}
                    }}
                }});
            </script>
        """
        components.html(htmlstr, height=0, width=0)

    ChangeButtonColour('View existing groups', 'white', '#b4aedf') 
    if st.button("View existing groups", key ='b3'):
        st.session_state.page = 'show_group'
        st.rerun()
```